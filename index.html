<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="Li Jiangtao">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="zhulinyin"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="zhulinyin"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>zhulinyin</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">zhulinyin</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2018/09/11/算法设计与分析-Week2/">
                算法设计与分析-Week2
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2018-09-11</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="算法设计与分析-Week2"><a href="#算法设计与分析-Week2" class="headerlink" title="算法设计与分析-Week2"></a>算法设计与分析-Week2</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><blockquote>
<p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.</p>
</blockquote>
<p><strong>Example 1:</strong></p>
<blockquote>
<p><strong>Input:</strong> “babad”<br><strong>Output:</strong> “bab”<br><strong>Note:</strong> “aba” is also a valid answer.</p>
</blockquote>
<p><strong>Example 2:</strong></p>
<blockquote>
<p><strong>Input:</strong> “cbbd”<br><strong>Output:</strong> “bb”  </p>
</blockquote>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>题目要求所给字符串的最长回文子字符串。</p>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h3><p>暴力求解。任选子字符串的两端，并验证该字符串是否为回文字符串，由于端点的两两选择需要\(O(n^2)\)的复杂度，验证字符串需要\(O(n)\)的复杂度，所以整个算法需要\(O(n^3)\)的时间复杂度。</p>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h3><p>并不需要对每个字符串都进行回文字符串的验证，假如一个字符串是回文字符串，那么如果其两侧的字符相同，则新的字符串也是回文字符串，这样就不用对新的字符串进行从头到尾的验证，从而把时间复杂度从\(O(n)\)降为\(O(1)\)。由所给的两个样例可以看出，回文字符串根据字符串的长度可分为奇偶两种，因此只要选好中心位置，沿着中心位置向两边进行扩展，就能得到该中心位置的最长回文字符串，遍历所有中心位置，就能得到最长的回文字符串，总的时间复杂度为\(O(n^2)\)。</p>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">int</span> start, length = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> len1 = maxLength(i, i, s);</span><br><span class="line">            <span class="keyword">int</span> len2 = maxLength(i, i + <span class="number">1</span>, s);</span><br><span class="line">            <span class="keyword">if</span>(len1 &gt; len2 &amp;&amp; len1 &gt; length) &#123;</span><br><span class="line">                start = i - len1 / <span class="number">2</span>;</span><br><span class="line">                length = len1;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(len1 &lt; len2 &amp;&amp; len2 &gt; length) &#123;</span><br><span class="line">                start = i - len2 / <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">                length = len2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substr(start, length);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxLength</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(left &gt;= <span class="number">0</span> &amp;&amp; right &lt; s.length() &amp;&amp; s[left] == s[right]) &#123;</span><br><span class="line">            left--;</span><br><span class="line">            right++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right - left - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2018/09/05/算法设计与分析-Week1/">
                算法设计与分析-Week1
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2018-09-05</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h1 id="算法设计与分析-Week1"><a href="#算法设计与分析-Week1" class="headerlink" title="算法设计与分析-Week1"></a>算法设计与分析-Week1</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><blockquote>
<p>Given n non-negative integers a1, a2, …, an , where each represents a point at coordinate (i, ai). n vertical lines are drawn such that the two endpoints of line i is at (i, ai) and (i, 0). Find two lines, which together with x-axis forms a container, such that the container contains the most water.<br><strong>Note:</strong> You may not slant the container and n is at least 2.</p>
</blockquote>
<p><img src="/2018/09/05/算法设计与分析-Week1/1.jpg" alt="图1"></p>
<p>The above vertical lines are represented by array [1,8,6,2,5,4,8,3,7]. In this case, the max area of water (blue section) the container can contain is 49.<br><strong>Example:</strong></p>
<blockquote>
<p><strong>Input:</strong> [1,8,6,2,5,4,8,3,7]<br><strong>Output:</strong> 49</p>
</blockquote>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>题目要求最大可装水的体积，可装水的体积取决于水桶两边的高以及底边的宽度，根据短板效应，可装水的高度不会超过两边的较短边的高度，因此可装水的体积=水桶两边的较短边的高度*底边的宽度。</p>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h3><p>暴力求解。将所有边两两组合并求体积，用两重循环即可解决，但时间复杂度为\(O(n^2)\)</p>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h3><p>先选取最左边和最右边两条边，记录此时的可装水的体积，由于该体积取决于两边的较短边，因此我们希望该较短边越长越好，于是我们将较短边替换成更内层的边，并计算新的可装水体积，与原来的体积作比较取较大值。最后当两边取到同一边时退出循环，得到最大可装水体积，时间复杂度为\(O(n)\)</p>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxArea</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; height)</span> </span>&#123;        </span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = height.size() - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = containWater(height[left], height[right], right - left);</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            <span class="keyword">if</span>(height[left] &lt; height[right])&#123;</span><br><span class="line">                left++;</span><br><span class="line">                <span class="keyword">int</span> temp = containWater(height[left], height[right], right - left);</span><br><span class="line">                <span class="keyword">if</span>(temp &gt; max)&#123;</span><br><span class="line">                    max = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                right--;</span><br><span class="line">                <span class="keyword">int</span> temp = containWater(height[left], height[right], right - left);</span><br><span class="line">                <span class="keyword">if</span>(temp &gt; max)&#123;</span><br><span class="line">                    max = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">containWater</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> width)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left &lt; right) <span class="keyword">return</span> left * width;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> right * width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2018/05/11/Unity3d学习笔记-智能巡逻兵/">
                Unity3d学习笔记-智能巡逻兵
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2018-05-11</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="游戏设计要求"><a href="#游戏设计要求" class="headerlink" title="游戏设计要求"></a>游戏设计要求</h2><ul>
<li>创建一个地图和若干巡逻兵(使用动画)；</li>
<li>每个巡逻兵走一个3~5个边的凸多边型，位置数据是相对地址。即每次确定下一个目标位置，用自己当前位置为原点计算；</li>
<li>巡逻兵碰撞到障碍物，则会自动选下一个点为目标；</li>
<li>巡逻兵在设定范围内感知到玩家，会自动追击玩家；</li>
<li>失去玩家目标后，继续巡逻；</li>
<li>计分：玩家每次甩掉一个巡逻兵计一分，与巡逻兵碰撞游戏结束；</li>
</ul>
<h2 id="程序设计要求"><a href="#程序设计要求" class="headerlink" title="程序设计要求"></a>程序设计要求</h2><ul>
<li>必须使用订阅与发布模式传消息</li>
<li>工厂模式生产巡逻兵</li>
</ul>
<h2 id="游戏实现"><a href="#游戏实现" class="headerlink" title="游戏实现"></a>游戏实现</h2><h3 id="巡逻兵"><a href="#巡逻兵" class="headerlink" title="巡逻兵"></a>巡逻兵</h3><p><img src="/2018/05/11/Unity3d学习笔记-智能巡逻兵/patrol.PNG" alt="巡逻兵"><br>为巡逻兵的父节点添加刚体和Capsule Collider，用于检测与玩家和墙壁的碰撞；为其子节点添加Box Collider，用于检测玩家是否进入巡逻兵的追踪范围。</p>
<ul>
<li>DirectionController</li>
</ul>
<blockquote>
<p>用于存储东南西北四个方向，并控制巡逻兵转向<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class DirectionController : MonoBehaviour &#123;</span><br><span class="line">    private Dictionary&lt;int, Vector3&gt; directions;//存储东南西北四个方向，巡逻兵沿矩形路径巡逻</span><br><span class="line">    // Use this for initialization</span><br><span class="line">    void Awake () &#123;</span><br><span class="line">        directions = new Dictionary&lt;int, Vector3&gt;();</span><br><span class="line">        directions.Add(0, new Vector3(1, 0, 0));</span><br><span class="line">        directions.Add(1, new Vector3(0, 0, 1));</span><br><span class="line">        directions.Add(2, new Vector3(-1, 0, 0));</span><br><span class="line">        directions.Add(3, new Vector3(0, 0, -1));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public Vector3 RandomDirection()//随机获得一个方向</span><br><span class="line">    &#123;</span><br><span class="line">        return directions[Random.Range(0, 4)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Vector3 ChangeDirection(Vector3 direction)//改变方向</span><br><span class="line">    &#123;</span><br><span class="line">        if (direction.Equals(directions[0]))</span><br><span class="line">        &#123;</span><br><span class="line">            return directions[1];</span><br><span class="line">        &#125;</span><br><span class="line">        else if (direction.Equals(directions[1]))</span><br><span class="line">        &#123;</span><br><span class="line">            return directions[2];</span><br><span class="line">        &#125;</span><br><span class="line">        else if (direction.Equals(directions[2]))</span><br><span class="line">        &#123;</span><br><span class="line">            return directions[3];</span><br><span class="line">        &#125;</span><br><span class="line">        else if (direction.Equals(directions[3]))</span><br><span class="line">        &#123;</span><br><span class="line">            return directions[0];</span><br><span class="line">        &#125;</span><br><span class="line">        return RandomDirection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>PatrolData</li>
</ul>
<blockquote>
<p>用于保存巡逻兵的基本信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolData : MonoBehaviour &#123;</span><br><span class="line">    public Vector3 position;        //记录巡逻兵的初始位置</span><br><span class="line">    public bool follow;             //记录巡逻兵是否追踪玩家</span><br><span class="line">    public GameObject player;       //记录玩家</span><br><span class="line">    public Vector3 direction;       //记录巡逻兵的巡逻方向</span><br><span class="line">    public float distance;          //记录巡逻兵沿着某一方向行走的距离</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>PatrolFactory</li>
</ul>
<blockquote>
<p>用于生产并初始化巡逻兵<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolFactory : MonoBehaviour &#123;</span><br><span class="line"></span><br><span class="line">    public GameObject patrolPrefab;</span><br><span class="line">    </span><br><span class="line">    public List&lt;GameObject&gt; GetPatrol()</span><br><span class="line">    &#123;</span><br><span class="line">        GameObject newObject;</span><br><span class="line">        List&lt;GameObject&gt; patrols=new List&lt;GameObject&gt;();</span><br><span class="line">        int[] pos_x = &#123; -15, 0, 15 &#125;;</span><br><span class="line">        int[] pos_z = &#123; -20, 20 &#125;;</span><br><span class="line">        for(int i = 0; i &lt; 3; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            for(int j = 0; j &lt; 2; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                newObject = Instantiate&lt;GameObject&gt;(patrolPrefab, new Vector3(pos_x[i], 0, pos_z[j]), Quaternion.identity);</span><br><span class="line">                newObject.GetComponent&lt;PatrolData&gt;().position = new Vector3(pos_x[i], 0, pos_z[j]);</span><br><span class="line">                newObject.GetComponent&lt;PatrolData&gt;().follow = false;</span><br><span class="line">                newObject.GetComponent&lt;PatrolData&gt;().player = SSDirector.GetInstance().CurrentSceneController.GetPlayer();</span><br><span class="line">                newObject.GetComponent&lt;PatrolData&gt;().direction = Singleton&lt;DirectionController&gt;.Instance.RandomDirection();</span><br><span class="line">                newObject.GetComponent&lt;PatrolData&gt;().distance = 0;</span><br><span class="line">                patrols.Add(newObject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return patrols;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>PatrolAction</li>
</ul>
<blockquote>
<p>巡逻兵巡逻动作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolAction : SSAction &#123;</span><br><span class="line"></span><br><span class="line">    private float speed = 5;</span><br><span class="line">    private Vector3 direction;</span><br><span class="line">    private float distance;</span><br><span class="line">    private float turnSpeed = 10;</span><br><span class="line">    public static PatrolAction GetSSAction()</span><br><span class="line">    &#123;</span><br><span class="line">        PatrolAction action = ScriptableObject.CreateInstance&lt;PatrolAction&gt;();</span><br><span class="line">        return action;</span><br><span class="line">    &#125;</span><br><span class="line">    // Use this for initialization</span><br><span class="line">    public override void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        direction = gameobject.GetComponent&lt;PatrolData&gt;().direction;</span><br><span class="line">        distance = gameobject.GetComponent&lt;PatrolData&gt;().distance;        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    public override void Update () &#123;</span><br><span class="line">        if (gameobject.GetComponent&lt;PatrolData&gt;().follow)</span><br><span class="line">        &#123;</span><br><span class="line">            this.destroy = true;</span><br><span class="line">            this.callback.SSActionEvent(this,0,gameobject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        direction = gameobject.GetComponent&lt;PatrolData&gt;().direction;</span><br><span class="line">        distance = gameobject.GetComponent&lt;PatrolData&gt;().distance;</span><br><span class="line">        if (distance &lt; 10)//巡逻兵移动</span><br><span class="line">        &#123;</span><br><span class="line">            transform.position += direction * speed * Time.deltaTime;</span><br><span class="line">            //将方向转换为四元数  </span><br><span class="line">            Quaternion quaDir = Quaternion.LookRotation(direction, Vector3.up);</span><br><span class="line">            //缓慢转动到目标点  </span><br><span class="line">            transform.rotation = Quaternion.Lerp(transform.rotation, quaDir, Time.fixedDeltaTime * turnSpeed);</span><br><span class="line">            gameobject.GetComponent&lt;PatrolData&gt;().distance += speed * Time.deltaTime;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        else//巡逻兵转向</span><br><span class="line">        &#123;</span><br><span class="line">            gameobject.GetComponent&lt;PatrolData&gt;().distance = 0;</span><br><span class="line">            gameobject.GetComponent&lt;PatrolData&gt;().direction = </span><br><span class="line">                Singleton&lt;DirectionController&gt;.Instance.ChangeDirection(direction);</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>PatrolFollowAction</li>
</ul>
<blockquote>
<p>巡逻兵追踪玩家动作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolFollowAction : SSAction</span><br><span class="line">&#123;</span><br><span class="line">    private GameObject player;</span><br><span class="line">    private float speed = 5.8f;</span><br><span class="line">    public static PatrolFollowAction GetSSAction()</span><br><span class="line">    &#123;</span><br><span class="line">        PatrolFollowAction action = ScriptableObject.CreateInstance&lt;PatrolFollowAction&gt;();</span><br><span class="line">        return action;</span><br><span class="line">    &#125;</span><br><span class="line">    // Use this for initialization</span><br><span class="line">    public override void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        player = gameobject.GetComponent&lt;PatrolData&gt;().player;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    public override void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (!gameobject.GetComponent&lt;PatrolData&gt;().follow)</span><br><span class="line">        &#123;</span><br><span class="line">            this.destroy = true;</span><br><span class="line">            this.callback.SSActionEvent(this,1,gameobject);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        transform.position = Vector3.MoveTowards(transform.position, player.transform.position, speed * Time.deltaTime);</span><br><span class="line">        transform.LookAt(player.transform.position);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="玩家"><a href="#玩家" class="headerlink" title="玩家"></a>玩家</h3><p><img src="/2018/05/11/Unity3d学习笔记-智能巡逻兵/player.PNG" alt="玩家"><br>为玩家预制添加刚体和Capsule Collider，使玩家能够与其他物体发生碰撞。</p>
<ul>
<li>UserGUI</li>
</ul>
<blockquote>
<p>接受玩家输入，控制玩家移动和使用技能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">private void Update()</span><br><span class="line">&#123;</span><br><span class="line">    if (action.GetGameState() == GameState.GAMEOVER) return;</span><br><span class="line">    //获取方向键的偏移量</span><br><span class="line">    translationX = Input.GetAxis(&quot;Horizontal&quot;);</span><br><span class="line">    translationZ = Input.GetAxis(&quot;Vertical&quot;);</span><br><span class="line">    //移动玩家</span><br><span class="line">    action.PlayerMove(new Vector3(translationX,0,translationZ));</span><br><span class="line">    if (coolTime&lt;=0 &amp;&amp; Input.GetButtonDown(&quot;Jump&quot;))//如果不在冷却时间内，按下空格可以触发加速技能</span><br><span class="line">    &#123;</span><br><span class="line">        action.SpeedUp();</span><br><span class="line">        coolTime = 10;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        coolTime -= Time.deltaTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">private void FixedUpdate()</span><br><span class="line">&#123;</span><br><span class="line">    action.PlayerRotate(new Vector3(translationX, 0, translationZ));//玩家旋转方向</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>FirstController</li>
</ul>
<blockquote>
<p>实现玩家移动、转向和加速，部分代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public void PlayerMove(Vector3 target)//玩家向目标移动</span><br><span class="line">&#123;</span><br><span class="line">    if (gameState != GameState.GAMEOVER)</span><br><span class="line">    &#123;</span><br><span class="line">        if (target.Equals(Vector3.zero))</span><br><span class="line">        &#123;</span><br><span class="line">            player.GetComponent&lt;Animator&gt;().SetBool(&quot;run&quot;, false);</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            player.GetComponent&lt;Animator&gt;().SetBool(&quot;run&quot;, true);</span><br><span class="line">            player.transform.position += target * moveSpeed * Time.deltaTime;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public void SpeedUp()//加速</span><br><span class="line">&#123;</span><br><span class="line">    moveSpeed = 10;</span><br><span class="line">    speedTime = 3;</span><br><span class="line">&#125;</span><br><span class="line">public void PlayerRotate(Vector3 direction)</span><br><span class="line">&#123;</span><br><span class="line">    if (gameState != GameState.GAMEOVER)</span><br><span class="line">    &#123;</span><br><span class="line">        if (!direction.Equals(Vector3.zero))</span><br><span class="line">        &#123;</span><br><span class="line">            //将方向转换为四元数  </span><br><span class="line">            Quaternion quaDir = Quaternion.LookRotation(direction, Vector3.up);</span><br><span class="line">            //缓慢转动到目标点  </span><br><span class="line">            player.transform.rotation = Quaternion.Lerp(player.transform.rotation, quaDir, Time.fixedDeltaTime * turnSpeed);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="巡逻兵的碰撞检测"><a href="#巡逻兵的碰撞检测" class="headerlink" title="巡逻兵的碰撞检测"></a>巡逻兵的碰撞检测</h3><ul>
<li>PatrolCollision</li>
</ul>
<blockquote>
<p>巡逻兵的Capsule Collider的碰撞检测，用于检测与玩家和墙壁的碰撞<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolCollision : MonoBehaviour &#123;</span><br><span class="line">    private void OnCollisionEnter(Collision collision)</span><br><span class="line">    &#123;</span><br><span class="line">        if (collision.gameObject.tag == &quot;Player&quot;)//当巡逻兵碰撞上玩家时，游戏结束</span><br><span class="line">        &#123;</span><br><span class="line">            Singleton&lt;GameEventManager&gt;.Instance.PlayerCollide();</span><br><span class="line">            gameObject.GetComponentInChildren&lt;Animator&gt;().SetTrigger(&quot;attack&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        else//当巡逻兵碰撞到其他物体如墙壁时，转换方向</span><br><span class="line">        &#123;</span><br><span class="line">            gameObject.GetComponent&lt;PatrolData&gt;().distance = 0;</span><br><span class="line">            gameObject.GetComponent&lt;PatrolData&gt;().direction = </span><br><span class="line">                Singleton&lt;DirectionController&gt;.Instance.ChangeDirection(gameObject.GetComponent&lt;PatrolData&gt;().direction);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>PatrolFollowCollision</li>
</ul>
<blockquote>
<p>巡逻兵的Box Collider上的碰撞检测，用于检测玩家进入和退出碰撞盒，决定是否追踪玩家<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolFollowCollision : MonoBehaviour &#123;</span><br><span class="line">    private void OnTriggerEnter(Collider collider)//当玩家进入范围内时，追踪玩家</span><br><span class="line">    &#123;</span><br><span class="line">        if (collider.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            gameObject.GetComponent&lt;BoxCollider&gt;().size = new Vector3(15, 1, 15);//将碰撞盒变大防止反复进入和退出范围</span><br><span class="line">            Singleton&lt;GameEventManager&gt;.Instance.PlayerClose(gameObject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    private void OnTriggerExit(Collider collider)//当玩家脱离范围时，停止追踪</span><br><span class="line">    &#123;</span><br><span class="line">        if (collider.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            Singleton&lt;GameEventManager&gt;.Instance.Escape(gameObject);</span><br><span class="line">            gameObject.GetComponent&lt;BoxCollider&gt;().size = new Vector3(10, 1, 10);//恢复碰撞盒大小</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="订阅与发布模式部分"><a href="#订阅与发布模式部分" class="headerlink" title="订阅与发布模式部分"></a>订阅与发布模式部分</h3><ul>
<li>GameEventManager</li>
</ul>
<blockquote>
<p>定义事件管理器，专门用于发布事件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class GameEventManager : MonoBehaviour &#123;</span><br><span class="line"></span><br><span class="line">    public delegate void GameOver();</span><br><span class="line">    public static event GameOver OnGameOver;</span><br><span class="line"></span><br><span class="line">    public delegate void PatrolFollow(GameObject ob);</span><br><span class="line">    public static event PatrolFollow OnPatrolFollow;</span><br><span class="line"></span><br><span class="line">    public delegate void PlayerEscape(GameObject ob);</span><br><span class="line">    public static event PlayerEscape OnPlayerEscape;</span><br><span class="line"></span><br><span class="line">    public void PlayerCollide()//玩家碰撞</span><br><span class="line">    &#123;</span><br><span class="line">        if (OnGameOver != null)</span><br><span class="line">        &#123;</span><br><span class="line">            OnGameOver();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void PlayerClose(GameObject ob)//玩家靠近巡逻兵</span><br><span class="line">    &#123;</span><br><span class="line">        if (OnPatrolFollow != null)</span><br><span class="line">        &#123;</span><br><span class="line">            OnPatrolFollow(ob);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Escape(GameObject ob)//玩家脱离巡逻兵</span><br><span class="line">    &#123;</span><br><span class="line">        if (OnPlayerEscape != null)</span><br><span class="line">        &#123;</span><br><span class="line">            OnPlayerEscape(ob);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>FirstController</li>
</ul>
<blockquote>
<p>场景控制器作为订阅者，只要相应事件发生，就会调用注册的方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">void OnEnable()</span><br><span class="line">&#123;</span><br><span class="line">    GameEventManager.OnGameOver += GameOver;</span><br><span class="line">    GameEventManager.OnPatrolFollow += Follow;</span><br><span class="line">    GameEventManager.OnPlayerEscape += Escape;</span><br><span class="line">&#125;</span><br><span class="line">void OnDisable()</span><br><span class="line">&#123;</span><br><span class="line">    GameEventManager.OnGameOver -= GameOver;</span><br><span class="line">    GameEventManager.OnPatrolFollow -= Follow;</span><br><span class="line">    GameEventManager.OnPlayerEscape -= Escape;</span><br><span class="line">&#125;</span><br><span class="line">public void GameOver()//游戏结束</span><br><span class="line">&#123;</span><br><span class="line">    gameState = GameState.GAMEOVER;</span><br><span class="line">    player.GetComponent&lt;Animator&gt;().SetBool(&quot;death&quot;, true);</span><br><span class="line">    player.GetComponent&lt;Animator&gt;().SetTrigger(&quot;dieTrigger&quot;);</span><br><span class="line">    actionManager.DestroyAllActions();</span><br><span class="line">    foreach(GameObject patrol in Patrols)</span><br><span class="line">    &#123;</span><br><span class="line">        patrol.GetComponentInChildren&lt;Animator&gt;().SetBool(&quot;run&quot;, false);</span><br><span class="line">        patrol.transform.localEulerAngles = new Vector3(0, patrol.transform.localEulerAngles.y, 0);</span><br><span class="line">        patrol.transform.position = new Vector3(patrol.transform.position.x, 0, patrol.transform.position.z);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">void Follow(GameObject ob)//巡逻兵跟随</span><br><span class="line">&#123;</span><br><span class="line">    ob.GetComponentInParent&lt;PatrolData&gt;().follow = true;</span><br><span class="line">&#125;</span><br><span class="line">void Escape(GameObject ob)//玩家脱离</span><br><span class="line">&#123;</span><br><span class="line">    ob.GetComponentInParent&lt;PatrolData&gt;().follow = false;</span><br><span class="line">    Singleton&lt;ScoreRecorder&gt;.Instance.AddScore();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>具体代码和游戏视频请参考我的github：<a href="https://github.com/zhulinyin/3D-GameDesign/tree/master/homework6" target="_blank" rel="noopener">Patrol</a><br>本次实验用到了订阅与发布模式，这种模式使得游戏的各个部分相对独立，随着工程的不断扩展变大，程序代码也会不断变多，使用这种方式来减少各部分之间的耦合，就变得非常有意义。</p>
</blockquote>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2018/04/07/稀疏编码/">
                稀疏编码
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2018-04-07</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h3 id="研究历史"><a href="#研究历史" class="headerlink" title="研究历史"></a>研究历史</h3><hr>
<p>&emsp;&emsp;1959年，David Hubel和Toresten Wiesel通过对猫的视觉条纹皮层简单细胞感受野的研究得出一个结论:主视皮层V1区神经元的感受野能对视觉感知信息产生一种“稀疏表示”。<br>&emsp;&emsp;1961年，H.B.Barlow基于这一知识提出了“利用感知数据的冗余”进行编码的理论。<br>&emsp;&emsp;1969年，D.J.Willshaw和O.P.Buneman等人提出了基于Hebbian 学习的局部学习规则的稀疏表示模型。这种稀疏表示可以使模型之间有更少的冲突，从而使记忆能力最大化。Willshaw模型的提出表明了稀疏表示非常有利于学习神经网络中的联想。<br>&emsp;&emsp;1972年，Barlow推论出在稀疏性(Sparsity)和自然环境的统计特性之间必然存在某种联系。随后,有许多计算方法被提出来论证这个推论，这些方法都成功地表明了稀疏表示可以体现出在大脑中出现的自然环境的统计特性。<br>&emsp;&emsp;1987年，Field提出主视皮层V1区简单细胞的感受野非常适于学习视网膜成像的图像结构，因为它们可以产生图像的稀疏表示。基于这个结论，1988年Michison明确提出了神经稀疏编码的概念，然后由牛津大学的E.T.Roll 等人正式引用。随后对灵长目动物视觉皮层和猫视觉皮层的电生理的实验报告，也进一步证实了视觉皮层复杂刺激的表达是采用稀疏编码原则的。<br>&emsp;&emsp;1989年，Field提出了稀疏分布式编码(Sparse Distributed Coding)方法。这种编码方法并不减少输入数据的维数，而是使响应于任一特殊输入信息的神经细胞数目被减少，信号的稀疏编码存在于细胞响应分布的四阶矩(即峭度Kurtosis)中。<br>&emsp;&emsp;1996年，Olshausen和Field在Nature杂志上发表了一篇重要论文指出，自然图像经过稀疏编码后得到的基函数类似于V1区简单细胞感受野的反应特性。这种稀疏编码模型提取的基函数首次成功地模拟了V1区简单细胞感受野的三个响应特性:空间域的局部性、时域和频域的方向性和选择性.考虑到基函数的超完备性(基函数维数大于输出神经元的个数)，Olshausen 和Field在1997年又提出了一种超完备基的稀疏编码算法，利用基函数和系数的概率密度模型成功地建模了V1区简单细胞感受野。<br>&emsp;&emsp;1997年，Bell和Sejnowski 等人把多维独立分量分析(Independent Component Analysis，ICA)用于自然图像数据分析，并且得出一个重要结论:ICA实际上就是一种特殊的稀疏编码方法。<br>&emsp;&emsp;21世纪以来，国外从事稀疏编码研究的人员又提出了许多新的稀疏编码算法，涌现出了大量的稀疏编码方面的论文，国内研究者在稀疏编码算法和应用方面也作了一些工作，但远远落后于国外研究者所取得的成果。</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><hr>
<p>&emsp;&emsp;目前,稀疏编码方法在盲源信号分离、语音信号处理、自然图像特征提取、自然图像去噪以及模式识别等方面已经取得许多研究成果，本系列博客主要研究稀疏编码算法在人脸识别上的应用。</p>
<h3 id="稀疏编码的介绍"><a href="#稀疏编码的介绍" class="headerlink" title="稀疏编码的介绍"></a>稀疏编码的介绍</h3><hr>
<p>&emsp;&emsp;稀疏编码是一种无监督学习算法，它通过寻找一组“超完备”的基向量，用这组基向量的线性组合来表示输入向量：</p>
<script type="math/tex; mode=display">y=D \alpha</script><p>&emsp;&emsp;其中，\( y=[y_1;y_2;…;y_n]\in R^n \)是输入向量；\( D=[d_1,d_2,…,d_m]\in R^{n\times m} \)是字典集，其中 \( d_i\in R^n \)是与输入向量相同维度的向量；\( \alpha\in R^m \)是编码系数。<br>&emsp;&emsp;稀疏编码可以分为两大步骤：字典学习，即为普通稠密表达的样本找到合适的字典\(D\)，将样本转化为合适的稀疏表达形式，从而使学习任务得以简化，模型复杂度得以降低。上述所述的“超完备”基向量的寻找实际上就是字典学习的过程；特征编码，即利用前面得到的字典再次最小化代价函数，得到新的样本特征（系数）\(\alpha\)。</p>
<h3 id="稀疏编码在人脸识别中的基本应用"><a href="#稀疏编码在人脸识别中的基本应用" class="headerlink" title="稀疏编码在人脸识别中的基本应用"></a>稀疏编码在人脸识别中的基本应用</h3><hr>
<p>&emsp;&emsp;传统的机器学习识别算法都是需要训练的，而基于稀疏分解的人脸识别是不需要训练的，或者说训练及其简单。基于稀疏表示的人脸识别，其稀疏表示用的字典直接由训练所用的全部图像构成，而不需要经过字典学习（也有一些改进算法，针对字典进行学习的）。理论上，一张人脸图像可以由同一数据库内中同一个人的所有人脸图像的线性组合表示，而对于数据库内的其他人脸，其线性组合的系数理论上为零。即如果某一个人的人脸图像展开成向量\(y\)，数据库里的所有人脸图像组成了字典\(D\)，那么</p>
<script type="math/tex; mode=display">\min_{\alpha}||y-D\alpha||_2^2</script><p>&emsp;&emsp;所得即为数据库内每一张人脸的编码系数，根据上述结论，我们希望这个系数向量\(\alpha\)是稀疏的，即$\alpha$中只有小部分的非零元素或者只有小部分远大于零的元素，于是我们加上正则化项，若使用\(L_0\)正则化，则有</p>
<script type="math/tex; mode=display">\min_{\alpha}||y-D\alpha||_2^2 +\lambda||\alpha||_0</script><p>&emsp;&emsp;然而上述公式涉及\(L_0\)范数最小化，是一个NP难问题，庆幸的是\(L_1\)范数最小化在一定条件下与\(L_0\)最小化共解，于是我们把上式转换为</p>
<script type="math/tex; mode=display">\min_{\alpha}||y-D\alpha||_2^2 +\lambda||\alpha||_1</script><p>&emsp;&emsp;\(L_1\)正则化的求解有许多种方法，例如近端梯度下降（Proximal Gradient Descent,简称PGD）。得到系数\(\alpha\)之后，将字典与系数向量依据人脸图像的类别不同进行切片</p>
<script type="math/tex; mode=display">\min_i ||y-D_i\alpha_i||_2^2</script><p>&emsp;&emsp;\(D_i\)指字典集的第i类人脸，\(\alpha_i\)指这类人脸对应的系数，重构误差最小的类即为\(y\)对应的类。</p>
<h3 id="稀疏脸的优点"><a href="#稀疏脸的优点" class="headerlink" title="稀疏脸的优点"></a>稀疏脸的优点</h3><hr>
<p>稀疏脸很强的地方在于对噪声相当鲁棒，相关文献表明，即使人脸图像被80%的随机噪声干扰，仍然能够得到很高的识别率。稀疏脸另外一个很强的地方在于对于部分遮挡的情况，例如戴围巾，戴眼镜等，仍然能够保持较高的识别性能。</p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><hr>
<p>所有的人脸图像必须是事先严格对齐的。否则，稀疏性很难满足。换言之，对于表情变化，姿态角度变化的人脸都不满足稀疏性这个假设。所以，经典的稀疏脸方法很难用于真实的应用场景。</p>
<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><hr>
<p>1.<a href="https://baike.baidu.com/item/%E7%A8%80%E7%96%8F%E7%BC%96%E7%A0%81" target="_blank" rel="noopener">百度百科</a><br>2.<a href="https://blog.csdn.net/gloriazhang2013/article/details/72735957" target="_blank" rel="noopener">字典学习和稀疏编码</a><br>3.《机器学习》周志华<br>4.<a href="https://blog.csdn.net/xiaoshengforever/article/details/14002843" target="_blank" rel="noopener">（SRC）基于稀疏表示的人脸识别</a></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>






</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2018/09/11/算法设计与分析-Week2/">算法设计与分析-Week2</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2018/09/05/算法设计与分析-Week1/">算法设计与分析-Week1</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2018/05/11/Unity3d学习笔记-智能巡逻兵/">Unity3d学习笔记-智能巡逻兵</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2018/04/07/稀疏编码/">稀疏编码</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>